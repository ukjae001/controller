cmake_minimum_required(VERSION 3.12)
project(h_fsm_controller)

set(CMAKE_CXX_STANDARD 17)

# 1. íŒ¨í‚¤ì§€ ê²€ìƒ‰
find_package(Boost REQUIRED COMPONENTS program_options)
find_package(yaml-cpp REQUIRED)

# 2. ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° í—¤ë” ê²½ë¡œ (ê¸°ì¡´ ì„¤ì • ìœ ì§€)
link_directories(
  /usr/local/lib 
  /ws/unitree_sdk2/lib/x86_64
  /ws/unitree_sdk2/thirdparty/lib/x86_64
)

include_directories(
  /ws/unitree_sdk2/thirdparty/include/ddscxx
  /ws/unitree_sdk2/thirdparty/include 
  /ws/unitree_sdk2/include
  /usr/local/include
  /usr/include/eigen3
  ${CMAKE_CURRENT_SOURCE_DIR}/include # ìƒëŒ€ ê²½ë¡œ ë³´ì¥
)

# 3. ë¼ì´ë¸ŒëŸ¬ë¦¬ ìƒì„± (FSM ë¡œì§)
# GLOB ë³´ë‹¤ëŠ” ì†ŒìŠ¤ íŒŒì¼ì„ ì§ì ‘ ëª…ì‹œí•˜ëŠ” ê²ƒì´ ë¹Œë“œ ì•ˆì •ì„±ì— ì¢‹ìŠµë‹ˆë‹¤.
add_library(${PROJECT_NAME}_lib SHARED src/FSM.cpp)

# ğŸ”¥ ì¤‘ìš”: ë¼ì´ë¸ŒëŸ¬ë¦¬ ìì²´ê°€ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì˜ì¡´í•¨ì„ ëª…ì‹œ
target_link_libraries(${PROJECT_NAME}_lib 
  PUBLIC
    unitree_sdk2
    yaml-cpp
    ddsc
    ddscxx
    ${Boost_LIBRARIES}
    fmt
    pthread
    rt
)

# 4. ì‹¤í–‰ íŒŒì¼ ìƒì„±
add_executable(h_fsm_ctrl src/main.cpp)

# 5. ì‹¤í–‰ íŒŒì¼ ë§í¬
# ì´ì œ h_fsm_ctrlì€ h_fsm_controller_libë§Œ ë§í¬í•˜ë©´ 
# í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ê°€ì§„ ëª¨ë“  ì˜ì¡´ì„±(SDK, YAML ë“±)ì„ ìë™ìœ¼ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.
target_link_libraries(h_fsm_ctrl 
  PRIVATE 
    ${PROJECT_NAME}_lib
)